<!DOCTYPE HTML>
<html>
<head>
   <title>Windows</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "source_code_license_windows.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Windows</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="source_code_license.htm">Previous</a>&nbsp;
     <a href="source_code_license_linux.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <h1 class="p_Heading1"><span class="f_Heading1">Compile the SDK from Source Code on Windows</span></h1>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> Placeholders and their possible values which are used in the descriptions below:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">&lt;InstallDir&gt;</span><span class="f_List">: Root path of the SDK installation</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">&lt;Platform&gt;</span><span class="f_List">, </span><span class="f_FixedSize">&lt;PlatformDir&gt;</span><span class="f_List">: </span><span class="f_Reference">Win32, x64</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">&lt;Configuration&gt;</span><span class="f_List">: </span><span class="f_Reference">Debug, DebugUnicode, Release, ReleaseUnicode</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">&lt;VSVersion&gt;</span><span class="f_List">: </span><span class="f_Reference">VS2013, VS2015, VS2017, VS2019, VS2022</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Step 1: Select the desired configuration</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">Open the Visual Studio solution file </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/TB_20[13|15|17|19|22].sln</span><span class="f_Paragraph"> matching your desired Visual Studio version.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Open the Configuration Manager via the menu </span><span class="f_Reference">Build</span><span class="f_Paragraph"> -&gt; </span><span class="f_Reference">Configuration Manager</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Select the desired Build Configuration </span><span class="f_Reference">Debug</span><span class="f_Paragraph">, </span><span class="f_Reference">Release</span><span class="f_Paragraph">, </span><span class="f_Reference">DebugUnicode</span><span class="f_Paragraph"> or </span><span class="f_Reference">ReleaseUnicode</span><span class="f_Paragraph"> and the desired Platform </span><span class="f_Reference">Win32</span><span class="f_Paragraph"> or</span><span class="f_Reference"> x64</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Close the window.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Step 2: Build the SDK</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">Build the entire solution via the menu </span><span class="f_Reference">Build</span><span class="f_Paragraph"> -&gt; </span><span class="f_Reference">Build Solution</span><span class="f_Paragraph">.</span></p>
<h1 class="p_Heading1"><span class="f_Heading1">&nbsp;</span></h1>
<h1 class="p_Heading1"><span class="f_Heading1">Compile OpenSSL</span></h1>
<p class="p_Paragraph"><span class="f_Paragraph">The configuration of OpenSSL is using the tools &quot;</span><span class="f_FixedSize">tar</span><span class="f_Paragraph">&quot; and &quot;</span><span class="f_FixedSize">perl</span><span class="f_Paragraph">&quot;, which have to be within the path.</span><br />
<span class="f_Paragraph">You can run under Cygwin or you can download ActiveState Perl from <a href="http://www.activestate.com/ActivePerl" target="_blank" class="weblink">http://www.activestate.com/ActivePerl</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">For the compilation of the OpenSSL library it is required that the installation path must not contain blanks or special characters.</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Compile the Static Library of OpenSSL</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">The build of the OpenSSL is invoked by the </span><span class="f_Reference">TB5STACK</span><span class="f_Paragraph"> project when performing the steps of </span><span class="f_Reference">Compile the SDK from Source Code on Windows and</span><span class="f_Paragraph"> whenever the file </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/lib/&lt;PlatformDir&gt;/&lt;VSVersion&gt;/&lt;Configuration&gt;/libeay32.lib</span><span class="f_Paragraph"> does not exist.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> In contract to building other SDK components, this build step as part of the Visual Studio project creates the OpenSSL as a static library </span><span class="f_FixedSize">libeay32.lib</span><span class="f_Paragraph"> instead of a DLL (even though the binary delivery of the SDK provides a DLL). If this build step is performed the files libcrypto-1_1.dll and libssl-1_1.dll (optionally with &quot;-x64&quot; if built for 64 bit) that might still exist in folders </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/bin/&lt;PlatformDir&gt;/&lt;VSVersion&gt;/&lt;Configuration&gt;</span><span class="f_Paragraph"> can be removed as they are no longer used.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Compile the DLLs of OpenSSL</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> If you want to perform a rebuild, you have to delete the file </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Core/&lt;PlatformDir&gt;/VS20[13|15|17|19|22]/&lt;Configuration&gt;/&lt;PlatformDir&gt;/lib/libeay32.lib</span><span class="f_Paragraph"> first.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Open a Command Prompt and navigate to </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Execute the batch file:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">build_openssl_dll.bat&nbsp;&lt;VSVersion&gt;&nbsp;&lt;Platform&gt;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> The execution of the command will display some linker errors as some ^test applications of OpenSSL cannot compile with the DLLs. Ignore those errors, as the DLLs are built correctly.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> Building the OpenSSL DLLs will replace the possibly existing static library files, built by </span><span class="f_Reference">Compile the Static Library of OpenSSL</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading2">Executing the Self-Test</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">If you like to verify the new build, you can run the </span><span class="f_Reference">Test Server</span><span class="f_Paragraph"> executable and verify the server and client behavior with the </span><span class="f_Reference">Test Client</span><span class="f_Paragraph">.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph"><a href="html_setupcertificates.htm#createdemopkistores" class="topiclink">Create Demo PKI Stores</a> for the StructoAutomoldServer and TestClient if the demo stores don't exist yet.</span><br />
<span class="f_Paragraph">In case you test between two systems, create the demo PKI stores on both systems and update the </span><span class="f_FixedSize">trusted</span><span class="f_Paragraph"> folders with the certificates of the remote machine.</span></td></tr></table></div><h3 class="p_Heading3"><span class="f_Heading3">If StructoAutomoldServer and TestClient run on the same system and your system supports hostnames:</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Start the CPPTestServer without additional parameters</span></td></tr></table></div><p class="p_CodeExample"><span class="f_CodeExample">&gt;&nbsp;CPPTestServer.exe</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Start the CPPTestClient with the file </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Apps/Test/Cpp/TestClient/TestFiles/System.xml</span><span class="f_Paragraph">.</span></td></tr></table></div><p class="p_CodeExample"><span class="f_CodeExample">&gt;&nbsp;CPPTestClient.exe&nbsp;&lt;InstallDir&gt;/Source/Apps/Test/Cpp/TestClient/TestFiles/System.xml</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">If StructoAutomoldServer and TestClient run on different systems or your system does NOT support hostnames:</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Start the CPPTestServer with the additional parameter </span><span class="f_FixedSize">/endpointurl</span><span class="f_Paragraph"> to specify the network interface to use</span></td></tr></table></div><p class="p_CodeExample"><span class="f_CodeExample">&gt;&nbsp;CPPTestServer.exe&nbsp;/endpointurl&nbsp;opc.tcp://</span><span class="f_CodeExample" style="font-weight: bold;">&lt;IP&nbsp;address&nbsp;or&nbsp;hostname&gt;</span><span class="f_CodeExample">:4880/Softing/OpcUa/StructoAutomoldServer</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Start the CPPTestClient with the file </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Apps/Test/Cpp/TestClient/TestFiles/System.xml</span><span class="f_Paragraph"> and provide additional parameters for the different host and server application URI (without the intermediate line break).</span></td></tr></table></div><p class="p_CodeExample"><span class="f_CodeExample">&gt;&nbsp;CPPTestClient.exe&nbsp;&lt;InstallDir&gt;/Source/Apps/Test/Cpp/TestClient/TestFiles/System.xml</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;/envVar&nbsp;TARGET_HOST=&lt;</span><span class="f_CodeExample" style="font-weight: bold;">IP&nbsp;address&nbsp;or&nbsp;hostname</span><span class="f_CodeExample">&gt;&nbsp;/envVar&nbsp;SERVER_URI=urn:&lt;</span><span class="f_CodeExample" style="font-weight: bold;">IP&nbsp;address&nbsp;or&nbsp;hostname</span><span class="f_CodeExample">&gt;/Softing/OpcUa/StructoAutomoldServer</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> The path containing the </span><span class="f_Reference">System.xml</span><span class="f_Paragraph"> script provided to the </span><span class="f_Reference">Test Client</span><span class="f_Paragraph"> executable must contain only ASCII characters in the path name - the parser within the client is not able to process other file names.</span><br />
<span class="f_Paragraph">If this is the case, then either provide relative paths or copy the </span><span class="f_FixedSize">TestFiles</span><span class="f_Paragraph"> folder to a different location.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> In case of the </span><span class="f_Paragraph" style="font-style: italic;">Client Source Code License</span><span class="f_Paragraph"> the delivered server source code is not complete. Although you can rebuild the StructoAutomoldServer without compilation errors, the server will not start. In this situation it is still safe to use the originally installed StructoAutomoldServer binaries for running the server in demo mode.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading2">Verifying the Test Results</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">When the </span><span class="f_Reference">Test Client</span><span class="f_Paragraph"> has completed the self-test, you should see a test result that indicates a total number of zero failed tests.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">-------------------------------------------</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Run&nbsp;time:&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Test&nbsp;result&nbsp;summary:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">-------------------------------------------</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Registered&nbsp;(different)&nbsp;tests:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Executed&nbsp;(different)&nbsp;tests:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Succeeded&nbsp;tests:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Failed&nbsp;tests:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">-------------------------------------------</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Total&nbsp;executed&nbsp;tests&nbsp;&nbsp;(incl.&nbsp;repeats):&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Total&nbsp;succeeded&nbsp;tests&nbsp;(incl.&nbsp;repeats):&nbsp;&nbsp;...</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Total&nbsp;failed&nbsp;&nbsp;tests&nbsp;&nbsp;&nbsp;(incl.&nbsp;repeats):&nbsp;&nbsp;&nbsp;&nbsp;0</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">-------------------------------------------</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=source_code_license_windows.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
