<!DOCTYPE HTML>
<html>
<head>
   <title>Alarms &amp; Conditions in Server Applications</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "html_ancserver.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Alarms &amp; Conditions in Server Applications</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="html_programmersguide_alarms_conditions.htm">Previous</a>&nbsp;
     <a href="html_ancserverreporting.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <h3 class="p_Heading3"><a id="hdr"></a><span class="f_Heading3">UA References Related to Conditions</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">OPC UA defines a set of references used for Alarms &amp; Conditions.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">These references must be used additionally to other references for identification of the linkage between the nodes in the address space.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Reference">HasNotifier</span><span class="f_Paragraph">: This reference connects two objects which are both enabled for subscribing for events. All events generated on the target of that reference will be additionally notified at the source node of that reference. </span><br />
<span class="f_Paragraph">This mechanism is used for &quot;event propagation&quot; and any client subscribing to a source of the reference will get events of all targets of all references. The root of all </span><span class="f_Reference">HasNotifier</span><span class="f_Paragraph"> references shall be the predefined server object.</span><br />
<span class="f_Paragraph">The SDK implementation propagates events along references of that type automatically. </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Reference">HasEventSource</span><span class="f_Paragraph">: This reference is the base reference type of the </span><span class="f_Reference">HasNotifier </span><span class="f_Paragraph">reference.</span><br />
<span class="f_Paragraph">It connects the object (reference source) which originates the alarm and the variable (reference target) which is the input for condition evaluation.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Reference">HasCondition: </span><span class="f_Paragraph">This references connects the object or input variable (</span><span class="f_Reference">ConditionSource</span><span class="f_Paragraph">) with the condition. </span><br />
<span class="f_Paragraph">Each </span><span class="f_Reference">ConditionSource</span><span class="f_Paragraph"> shall be the target of a </span><span class="f_Reference">HasEventSource</span><span class="f_Paragraph"> Reference or a sub type of </span><span class="f_Reference">HasEventSource</span><span class="f_Paragraph">.</span><br />
<span class="f_Paragraph">In OPC UA C++ Server &amp; Client SDK V6.00 this reference has to be established between the input variable and the condition.</span><br />
<span class="f_Paragraph">It causes invocation of the method evaluation the condition in case of value changes.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p><img src="ac_references.png" width="684" height="445" alt="AC_References" style="width:684px;height:445px;border:none" /></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Sample of condition related references</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="html_serverancdefininganalarm.htm" class="topiclink">Defining an Alarm</a> how a condition or alarm is created.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">EventNotifier Attribute</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">Every object which shall be exposed for event subscriptions must be enabled via <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_object.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_object_1a2dda540444a2adee07339b365aa9c0e7" class="topiclink">Object::setEventNotifier</a> with the value </span><span class="f_FixedSize">EnumEventNotifier_SubscribeToEvents</span><span style="font-weight: bold;"> </span><span class="f_Paragraph">(see <a href="_enums_8h_1a890aa2ace7e7d8e921736168452294aa.htm" class="topiclink">EnumEventNotifier</a>).</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The predefined &quot;</span><span class="f_Reference">Server</span><span class="f_Paragraph">&quot; object always has this attribute set.</span><br />
<span class="f_Paragraph">Defining additional objects with this attribute enables the possibility for clients to subscribe for specific parts of a system only.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">This step is optional and only relevant if the server allows to subscribe for events on this node.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Any object with a source of a </span><span class="f_Reference">HasNotifier</span><span class="f_Reference" style="font-style: normal;"> Reference shall have this attribute set.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">pObjectThrowingAnAlarm-&gt;setEventNotifier(EnumEventNotifier_SubscribeToEvents);</span></p>
<p style="margin: 0px 0px 0px 0px;"><span style="font-size: 10pt; font-family: Arial; color: #000000;">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Event Related References Between Node Types and their Semantic</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The UA Specification has foreseen special reference types between node types with an implied semantic concerning </span><span class="f_Reference">EventNotifications</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">These references and the meaning for a server implementation are:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Reference">GeneratesEvent</span><span class="f_Paragraph">: Is an informational reference pointing from <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_variable_type.htm" class="topiclink">VariableType</a>, <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_object_type.htm" class="topiclink">ObjectType</a> or <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_method.htm" class="topiclink">Method</a> nodes to </span><span class="f_Reference">EventTypes</span><span class="f_Paragraph"> to identify the </span><span class="f_Reference">EventTypes</span><span class="f_Paragraph"> that may be generated by an event source.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Reference">AlwaysGeneratesEvent</span><span class="f_Paragraph">: Is similar to &quot;GeneratesEvent&quot; but here the source node has to be a <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_method.htm" class="topiclink">Method</a> and that will generate an event of the referenced type with each single call. It is the Server's responsibility to fulfill the sending of a notification in the method call.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">These references are optional.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=html_ancserver.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
