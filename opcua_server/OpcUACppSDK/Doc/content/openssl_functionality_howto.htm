<!DOCTYPE HTML>
<html>
<head>
   <title>OpenSSL Functionality</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "openssl_functionality_howto.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">OpenSSL Functionality</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="matrix_serialization.htm">Previous</a>&nbsp;
     <a href="howto_shared_libraries.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 includes OpenSSL libraries for the necessary functionality of OPC UA, i.e. certificate validation, encryption, ssl, ...</span><br />
<span class="f_Paragraph">The OpenSSL version used is 1.1.1o. Unless you re-compile the complete SDK (see <a href="source_code_license.htm" class="topiclink">Source Code License</a>) you have to use exactly this version of OpenSSL.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">In general an application may be interested to invoke functionality within OpenSSL directly beneath the usage and interfaces provided by the SDK.</span><br />
<span class="f_Paragraph">In this case some rules have to be followed:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Do not use any OpenSSL functionality before <a href="globalfunctions.htm#namespace_softing_o_p_c_toolbox5_1a00344501e9d2800277909261c399cd3d" class="topiclink">loadToolbox</a> or after <a href="globalfunctions.htm#namespace_softing_o_p_c_toolbox5_1ac6ff128daf670e7e1aad20842bc4991d" class="topiclink">unloadToolbox</a>; the SDK initializes / uninitializes OpenSSL at this time</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Do not register any function pointers (e.g. CRYPTO_set_mem_functions() ); changing such function pointers will cause errors or crashes</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Do not register any callbacks in OpenSSL (e.g. CRYPTO_set_locking_callback() ); changing such callbacks will cause errors or crashes</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">To invoke any functionality of OpenSSL you have to include the header files of the OpenSSL version used by the OPC UA C++ Server &amp; Client SDK V6.00.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Binary License</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">If you bought the binary license of OPC UA C++ Server &amp; Client SDK V6.00, you have to download the OpenSSL version 1.1.1o from <a href="https://www.openssl.org/source/" target="_blank" class="weblink" title="http://www.openssl.org/source">http://www.openssl.org/source</a> by your own.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Create a new folder below </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Core</span><span class="f_List"> named &quot;OpenSSL&quot; </span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Copy the downloaded file (.tar.gz) into this folder</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_List">Configure OpenSSL for your environment</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">The configuration of OpenSSL is using the tools &quot;</span><span class="f_FixedSize">tar</span><span class="f_Paragraph">&quot; and &quot;</span><span class="f_FixedSize">perl</span><span class="f_Paragraph">&quot;, which have to be within the path.</span><br />
<span class="f_Paragraph">A restriction from OpenSSL is as well, that the installation path must not contain blanks or special characters.</span></p>
<p class="p_Paragraph"><span class="f_Heading3">Linux</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Note there are some additional variables to specify the configuration:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">CROSS_COMPILE=&lt;cross compiler prefix&gt;</span><span class="f_List"> - if you like to execute a cross compilation</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">MACHINE_OPT=&lt;specific compiler flags&gt;</span><span class="f_List"> that shall be passed for compilation, e.g. -m32 or -m64</span><br />
<span class="f_List">The specific compiler flags shall be passed to the configure tool of OpenSSL</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">In a command shell invoke (e.g. for a 64 bit linux)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;&lt;Installdir&gt;/Source/Core/OpenSSL</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">tar&nbsp;xf&nbsp;openssl-1.1.??.tar.gz</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;openssl-1.1.??</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">export&nbsp;MACHINE_OPT=-m64</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">sh&nbsp;./config&nbsp;$(MACHINE_OPT)&nbsp;no-dso&nbsp;no-pic&nbsp;no-autoload-config&nbsp;-DOPENSSL_AES_CONST_TIME</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">make</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You will find the header files below the folder </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Core/OpenSSL/openssl_1.1.??/include</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">For further details, see the OpenSSL Wiki at <a href="https://wiki.openssl.org/index.php/Compilation_and_Installation" target="_blank" class="weblink">https://wiki.openssl.org/index.php/Compilation_and_Installation</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Windows</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">You can configure OpenSSL for 32 bit application or 64 bit application. Depending on the platform you are compiling, you have to use the correct OpenSSL configuration.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> All necessary environment settings of your compiler need to be set when building the OpenSSL, e.g. for VisualStudio run the commands from a Visual Studio Command Prompt.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">To configure and build OpenSSL for 32 bit Windows applications, invoke the following commands in a command shell (replace &lt;InstallDir&gt; with the folder where the SDK is installed):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;&lt;Installdir&gt;\Source\Core\OpenSSL</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">tar&nbsp;xf&nbsp;openssl-1.1.??.tar.gz</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;openssl-1.1.??</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">set&nbsp;CONFIGURE_INSIST=1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">set&nbsp;PERL=perl</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">perl&nbsp;Configure&nbsp;VC-WIN32&nbsp;no-asm&nbsp;no-makedepend&nbsp;no-autoload-config&nbsp;-DOPENSSL_AES_CONST_TIME&nbsp;shared&nbsp;--prefix=&lt;Installdir&gt;\Source\Core\OpenSSL\Win32</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">nmake</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">nmake&nbsp;install_sw</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">To configure and build OpenSSL for 64 bit Windows applications invoke the commands with :</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;&lt;Installdir&gt;\Source\Core\OpenSSL</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">tar&nbsp;xf&nbsp;openssl-1.1.??.tar.gz</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">cd&nbsp;openssl-1.1.??</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">set&nbsp;CONFIGURE_INSIST=1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">set&nbsp;PERL=perl</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">perl&nbsp;Configure&nbsp;VC-WIN64A-masm&nbsp;no-makedepend&nbsp;no-autoload-config&nbsp;-DOPENSSL_AES_CONST_TIME&nbsp;shared&nbsp;--prefix=&lt;Installdir&gt;\Source\Core\OpenSSL\x64</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">nmake</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">nmake&nbsp;install_sw</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You will find the generated header files below the folder </span><span class="f_FixedSize">&lt;InstallDir&gt;\Source\Core\OpenSSL\&lt;platform&gt;\include</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">For further details, see the OpenSSL Wiki at <a href="https://wiki.openssl.org/index.php/Compilation_and_Installation" target="_blank" class="weblink">https://wiki.openssl.org/index.php/Compilation_and_Installation</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">VxWorks</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The original sources from OpenSSL cannot be used directly for VxWorks. Some adaptions are necessary in the sources and headers.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You can find the header files for OpenSSL at </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Core/include/VxWorks/openssl</span><span class="f_Paragraph">.</span></p>
<p class="p_FixedSize"><span class="f_Paragraph" style="font-weight: bold;">Note: </span><span class="f_Paragraph">Since manual adoptions are necessary, OpenSSL for VxWorks may use a different version than the other operating systems.</span><br />
<span class="f_Paragraph">The actually used OpenSSL version for VxWorks is 1.0.2q</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Source Code License</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">If you bought the source code license, the used OpenSSL sources and makefiles for building OpenSSL are included in the delivery.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">When building the SDK the delivered OpenSSL is automatically built with the rest of the SDK.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="source_code_license.htm" class="topiclink">Source Code License</a></span></p>
<p class="p_Paragraph"><span class="f_Heading3">Linux</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Build the OPC UA C++ Server &amp; Client SDK V6.00 with your preferred compiler options, machine type, optional compiler flags and gcc via</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">make&nbsp;-f&nbsp;linux_gcc_core2.mak</span><span class="f_FixedSize">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You will find the matching OpenSSL header files at the location </span><span class="f_FixedSize">&lt;InstallDir&gt;/Source/Core/linux/&lt;MACHINE_TYPE&gt;/gcc&lt;GCC_MAJOR_VERSION&gt;/&lt;BUILD_TARGET&gt;/openssl-1.1.??</span><span class="f_Paragraph">, where</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">MACHINE_TYPE</span><span class="f_List"> is the machine type (e.g. </span><span class="f_FixedSize">x64_86</span><span class="f_List">, </span><span class="f_FixedSize">i386</span><span class="f_List"> or any specified MACHINE_TYPE used at make)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">GCC_MAJOR_VERSION</span><span class="f_List"> is the major version of the used gcc</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:18px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_FixedSize">BUILD_TARGET</span><span class="f_List"> is typically </span><span class="f_FixedSize">debug</span><span class="f_List"> or </span><span class="f_FixedSize">release</span><span class="f_List"> or any other configuration used as BUILD_TARGET in make</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading3">Windows</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Simple open the delivered solution </span><span class="f_FixedSize">TB_20[13|15|17|19|22].sln</span><span class="f_Paragraph"> and build your preferred platform and configuration.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You can find the OpenSSL header files at the location </span><span class="f_FixedSize">&lt;InstallDir&gt;\Source\Core\&lt;platform&gt;\&lt;Visual Studio&gt;\&lt;platform&gt;\include</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">VxWorks</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="source_code_license_vxworks.htm" class="topiclink">Compile the SDK from Source Code for VxWorks</a></span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=openssl_functionality_howto.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
