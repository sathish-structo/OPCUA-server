<!DOCTYPE HTML>
<html>
<head>
   <title>Virtual Nodes</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "html_programmersguide_how_to_server_dynamic_adressspace.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Virtual Nodes</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="html_programmersguide_how_to_server_monitored_items_queuing.htm">Previous</a>&nbsp;
     <a href="html_programmersguide_how_to_client.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><span class="f_Paragraph">The name &quot;virtual nodes&quot; and &quot;virtual references&quot; describes node and references which is not stored within the SDK, the contents of the nodes and references are only known to the application.</span><br />
<span class="f_Paragraph">An application can adapt the service implementations to provide the virtual contents to the service responses, this way it is possible to handle nodes which are not stored within the SDK.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">There are several reasons why virtual nodes can make sense:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The virtual nodes can be used to reduce the memory footprint, especially for huge address spaces.</span><br />
<span class="f_Paragraph">The SDK nodes are stored in RAM which means every node reserves a little bit of memory even if several nodes are rarely used by clients.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 13px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Paragraph">One approach is to store the contents of the nodes and references somewhere else e.g. on a data base.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 13px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Paragraph">Another approach is to generate the nodes and/or references from a simplified or existing description which is already available.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Some servers have a very dynamic address space, either because the content depends on an external data source e.g. for an aggregating OPC UA server or when the address space shall be adopted to a frequently changing input.</span><br />
<span class="f_Paragraph">For such cases the virtual nodes can reduce the effort or increase the performance when adding or removing lots of nodes in the address space.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Building up a huge address space of SDK nodes can take some and thus slows down the startup of the server.</span><br />
<span class="f_Paragraph">The virtual nodes can help to speed up the startup of the server as the node information doesn't need to be introduced to the SDK.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The SDK supports two possible ways to implement virtual nodes:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Implement the services for virtual nodes completely in the application code and fill the service responses manually.</span><br />
<span class="f_Paragraph">This approach usually has the best performance but requires to implement the service responses as they are defined by the specification.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Detect service calls to virtual nodes and create the nodes temporarily in the address space before continuing the service call.</span><br />
<span class="f_Paragraph">The service response is then filled from the SDK.</span><br />
<span class="f_Paragraph">This approach requires less details about the service handling, but requires a good concept for when to add and remove nodes and which other virtual nodes may be involved by the service, e.g. for a Browse service.</span></td></tr></table></div><p class="p_NoteHeader"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> It is also possible to mix the two concepts, e.g. to distribute the two concepts among different service groups.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> To implement virtual nodes it is necessary to override and adapt </span><span class="f_Paragraph" style="font-weight: bold;">all</span><span class="f_Paragraph"> node or reference related services.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The minimal services to override are:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Browse (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_browse_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_browse_transaction_1a60dc81ac4b6329107e55118f1f04a5fc" class="topiclink">BrowseTransaction::handleRequests()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">BrowseNext (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_browse_next_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_browse_next_transaction_1a6d89b27bd573430945fc54f9ae5fcd64" class="topiclink">BrowseNextTransaction::handleRequests()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">TranslateBrowsePathsToNodeIds (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_translate_browse_paths_to_node_ids_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_translate_browse_paths_to_node_ids_transaction_1a2f5738e353ec3af4a177134502e84083" class="topiclink">TranslateBrowsePathsToNodeIdsTransaction::handleRequests()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Read (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_read_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_read_transaction_1acbcdd9e8b225f062745c972834b3829c" class="topiclink">ReadTransaction::handleRequests()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">CreateMonitoredItems (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription_1adb03a5fe96e251f989d03a5c641b5f0b" class="topiclink">Subscription::handleCreateMonitoredItems()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">ModifyMonitoredItems (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription_1ac9b2032410ca4eba0252865d31ddc99c" class="topiclink">Subscription::handleModifyMonitoredItems()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">DeleteMonitoredItems (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription_1a75b4931dcf2609afed7fe626d4044b0e" class="topiclink">Subscription::handleDeleteMonitoredItems()</a>)</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Usually a server also needs to support the following basic services:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Write (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_write_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_write_transaction_1ac4b77373cdaf36296b7dd936589b89d2" class="topiclink">WriteTransaction::handleRequests()</a>)</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">MethodCall (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_method_call_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_method_call_transaction_1a746203bf109094c76fac0acdc5b44e08" class="topiclink">MethodCallTransaction::handleRequests()</a>)</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The following services are less common and need to be supported only if there are virtual nodes which support the related features:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">HistoryRead (<a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_event_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_event_transaction_1aefe1014f2cedc1e8d921b7658db262ed" class="topiclink">HistoryReadEventTransaction::handleRequests()</a>, <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_processed_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_processed_transaction_1af5244113c5fb86a25657474810fc624e" class="topiclink">HistoryReadProcessedTransaction::handleRequests()</a>, <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_raw_transaction.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_history_read_raw_transaction_1a7ca5e42f5c4198c3793e0af266382774" class="topiclink">HistoryReadRawTransaction::handleRequests</a>)</span></td></tr></table></div><p class="p_NoteHeader"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> Even if only a subset of the described services are used, it is proposed to override all services and provide a minimal implementation for the unused services to return the correct status codes.</span><br />
<span class="f_Paragraph">All default service implementations return </span><span class="f_Reference">EnumStatusCode_BadNodeIdUnknown</span><span class="f_Paragraph"> for virtual nodes, but should return a different status if the node exists, e.g. </span><span class="f_Reference">EnumStatusCode_BadNotWritable</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="virtual_nodes_server.htm" class="topiclink">Virtual Nodes Server</a> for an example implementation using virtual nodes</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=html_programmersguide_how_to_server_dynamic_adressspace.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
