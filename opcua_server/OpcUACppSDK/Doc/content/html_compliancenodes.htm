<!DOCTYPE HTML>
<html>
<head>
   <title>Compliance Notes</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "html_compliancenodes.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Compliance Notes</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="html_tracefiltering.htm">Previous</a>&nbsp;
     <a href="html_supportinfo.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <h3 class="p_Heading3"><a id="hdr"></a><span class="f_Heading3">OPC UA Specification</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 implements the OPC UA specification version 1.04.</span></p>
<p class="p_Paragraph"><span class="f_Heading3">OPC UA Compliance Test</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Open standards such as the OPC specifications are created with the aim of permitting interoperability between products from different manufacturers. In order to ensure that a product actually complies with the specification it must undergo a series of tests that certifies the compliance of the product with the specification. Users need to feel confident that OPC products they purchase from different manufacturers will work properly when connected to one another. The user can gain this confidence by selecting certified products. The noncompliance of a product typically stems from either an incorrect interpretation of the specification or because of an incomplete or incorrect implementation of the specification.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Compliance testing is designed to assist the manufacturer in finding and correcting noncompliances before a user encounters them in the field. Manufacturers can choose between self-certification for their products or certification by an independent Certification Test Lab.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The self-certification can be done with the Compliance Test Tool (CTT) from the OPC Foundation.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">For further information please visit the web page of the OPC Foundation for an <a href="https://opcfoundation.org/certification/overview-benefits/" target="_blank" class="weblink" title="Overview &amp; Benefits">overview and the benefits</a> of the certification.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> The certification applies only for individual applications and not for an entire SDK.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 cannot cover all certification details on its own, e.g. if values are correctly transported from or to a device, but the SDK ensures to have a compliant base implementation which allows you to build a client or server which can be certified.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The StructoAutomoldServer of the SDK version 5.70.0 passed the Compliance Test in the Certification Test Lab successfully.</span><br />
<span class="f_Paragraph">Furthermore for every version of the SDK the StructoAutomoldServer passes the self-certification test by using the latest CTT version.</span><br />
<span class="f_Paragraph">The StructoAutomoldServer of the SDK version 6.00.0 passed the CTT version 1.4.9.398.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note</span><span class="f_Paragraph">: When using the PKI structure as suggested by the CTT, please notice that CTT creates its CRL (revocation_list_opcuactt_ca.crl) in DER format, whereas OPC UA C++ Server &amp; Client SDK V6.00 requires a CRL in PEM format.</span><br />
<span class="f_Paragraph">So make sure to convert the CTT provided CRL to PEM format for your applications CRL folder.</span><br />
<span class="f_Paragraph">Conversion can be done e.g. via openssl like</span><br />
<span class="f_Paragraph"> &nbsp; &nbsp; &nbsp;  </span><span class="f_FixedSize">openssl crl -inform DER -in revocation_list_opcuactt_ca.crl -outform PEM -out ctt_crl.crl</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Applications which are developed with the OPC UA C++ Server &amp; Client SDK V6.00 however have to include some code snippets to pass CTT tests; here is a list of them:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#99ccff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Code snippet</span></p>
</td>
<td style="vertical-align:top; background-color:#99ccff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Reason</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p><span class="f_FixedSize">Application::instance()-&gt;addServerProfileURI(</span><br />
<span class="f_FixedSize">_T(&quot;http://opcfoundation.org/UA-Profile/Transport/https-uabinary&quot;));</span></p>
<p><span class="f_FixedSize">Application::instance()-&gt;addServerProfileURI(_T(&quot;</span><br />
<span class="f_FixedSize">http://opcfoundation.org/UA-Profile/Server/StandardUA2017&quot;));</span></p>
<p>&nbsp;</p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph">The server has to provide the profile(s) which shall be tested.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="class_softing_o_p_c_toolbox5_1_1_application.htm#class_softing_o_p_c_toolbox5_1_1_application_1a57461605f9afc130eddfd95d9ab0cd3f" class="topiclink">addServerProfileURI</a> for more details about the Profile URIs.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p><span class="f_FixedSize">Application::instance()-&gt;setMaxPipedPublishRequests(10);</span></p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph">The number of piped publish requests must be adapted for profiles which include the &quot;Enhanced DataChange Subscription 2017 Server Facet&quot;, which requires to support at least 10 piped publish requests.</span><br />
<span class="f_Paragraph">The &quot;Enhanced DataChange Subscription 2017 Server Facet&quot; is part of the common used &quot;Standard 2017 UA Server Profile&quot;.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p><span class="f_FixedSize">MyServerSubscription::onCreate()</span></p>
<p><span class="f_FixedSize">{</span></p>
<p><span class="f_FixedSize">...</span></p>
<p><span class="f_FixedSize"> &nbsp; &nbsp;enableClientHandleValidation(false);</span></p>
<p><span class="f_FixedSize">}</span></p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph">Disables the validation of monitored item client handles.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">See <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_subscription_1a7779b6f3977463d596f4b0a48968a15b" class="topiclink">enableClientHandleValidation</a> what is disabled.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">CTT does not care about unique client handles and some tests (e.g. Monitored Item Services / Monitor Basic / Err-020.js) will fail if this validation is enabled.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p><span class="f_FixedSize">PkiStoreConfiguration storeConfiguration;</span></p>
<p><span class="f_FixedSize">...</span></p>
<p><span class="f_FixedSize">storeConfiguration.setRevocationCheckOptions(EnumCrlCheckOption_AllExceptSelfSigned);</span></p>
<p><span class="f_FixedSize">storeConfiguration.checkSelfSignedSignature(true);</span></p>
<p><span class="f_FixedSize">storeConfiguration.setEnableStrictKeyUsageCheck(true);</span></p>
<p><span class="f_FixedSize">storeConfiguration.checkUrlMatch(true);</span></p>
<p><span class="f_FixedSize">...</span></p>
<p><span class="f_FixedSize">Application::instance()-&gt;setPkiStoreConfiguration(&amp;storeConfiguration);</span></p>
<p>&nbsp;</p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph">CTT requires specific certificate check options to pass test scripts.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The same options (except checkUrlMatch) shall be used also for user validation, if the server supports user authentication via X509 certificates.</span><br />
<span class="f_Paragraph">Use <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint_1ac1975e1887340029142aca92392da534" class="topiclink">Server::Endpoint::setUserPkiConfiguration</a> to specify the PKI configuration for user authentication.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Known reported errors for testing with CTT version 1.4.9.398, which can be ignored / omitted:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#99ccff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">CTT test script</span></p>
</td>
<td style="vertical-align:top; background-color:#99ccff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Description</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_FixedSize"><span class="f_FixedSize">Script Base Information / Base Info Core Structure / 001.js </span></p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph">CTT tries to validate the address space.</span><br />
<span class="f_Paragraph">Some security related nodes are hidden for &quot;normal&quot; users and CTT does not find expected nodes.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">These nodes are mainly the role nodes (below ServerCapabilities/RoleSet)- und TrustList nodes (below ServerConfiguration/CertificateGroups).</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Mantis issue: 7690</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_FixedSize"><span class="f_FixedSize">Subscription / Subscription Minimum 02 / 003.js</span></p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Reported error: </span><span class="f_Paragraph">Expected to receive ... Expected &lt;2488337029&gt; but got &lt;2488337028&gt;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The test script fails randomly, especially on servers with slow CPU</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Mantis issue: 4874</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_FixedSize"><span class="f_FixedSize">Session / Session Change User / 001.js</span></p>
</td>
<td style="vertical-align:top; background-color:#ffffff; padding:3px;"><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Reported error: </span><span class="f_Paragraph">Expected to receive a dataChange</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">This error is reported randomly since CTT changes the current user and expects a data change notification on &quot;CurrentTime&quot; after that.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Since SDK updates CurrentTime only once a second, CTT does not wait long enough to receive the changed value.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">You may increase the &quot;Default Subscription Publish Interval&quot; in CTT settings to 1000ms to avoid this issue, but many other test executions will take much more time.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Mantis issue: 5626</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading3">OPC Interoperability Workshop</span><span class="f_Paragraph"> </span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">Interoperability (IOP) Workshops are OPC Foundation events that put OPC Foundation members (vendors) in the same room enabling them to connect to a central network to test against each others' products to make sure that they are indeed able to connect to each other and communicate correctly and reliably.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Softing OPC UA C++ SDK is regularly tested against other OPC UA products at the IOP workshops from the OPC Foundation with great success.</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=html_compliancenodes.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
