<!DOCTYPE HTML>
<html>
<head>
   <title>Configure DataSetWriter</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "html_programmersguide_pubsub_publisherconfiguration_datasetwriter.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Configure DataSetWriter</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="html_programmersguide_pubsub_publisherconfiguration_publisheddataset.htm">Previous</a>&nbsp;
     <a href="html_programmersguide_pubsub_publisherconfiguration_writergroup.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriter</a> is bound to one <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm" class="topiclink">PublishedDataSet</a> and describes how the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm" class="topiclink">PublishedDataSet</a> is written into a </span><span class="f_Reference">DataSetMessage</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The mandatory configuration requires the following fields:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Assign the desired <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm" class="topiclink">PublishedDataSet</a> via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1aabb7352b20bf54870292215286077112" class="topiclink">PublishedDataSet::setDataSet()</a>. The <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm" class="topiclink">PublishedDataSet</a> can be the common base type or one of its supported subtypes (see <a href="html_programmersguide_pubsub_publisherconfiguration_publisheddataset.htm" class="topiclink">Configure PublishedDataSet</a>).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Invoke <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1a79f047ba768c98f7db562687a6c13c4b" class="topiclink">DataSetWriter::setId()</a> and assign an ID, that shall be unique across all <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriters</a> for the same PublisherId (see <a href="html_programmersguide_pubsub_publisherconfiguration_connection.htm" class="topiclink">Configure Connection</a>). Subscribers can use this ID to filter messages.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Invoke <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1aecb7f10eec81ca01554bc48ae78f27b8" class="topiclink">DataSetWriter::setMessageSettings()</a> and initialize it with the protocol specific message settings. Currently only the <a href="class_softing_o_p_c_toolbox5_1_1_uadp_data_set_writer_message_data_type.htm" class="topiclink">UadpDataSetWriterMessageDataType</a> is supported.</span><br />
<span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_uadp_data_set_writer_message_data_type.htm" class="topiclink">UadpDataSetWriterMessageDataType</a> can be used with its default value or you can assign configure to include additional header information via <a href="class_softing_o_p_c_toolbox5_1_1_uadp_data_set_writer_message_data_type.htm#class_softing_o_p_c_toolbox5_1_1_uadp_data_set_writer_message_data_type_1aba22d6e1a200ae01c3cdeacbd4b1483d" class="topiclink">UadpDataSetWriterMessageDataType::setDataSetMessageContentMask()</a>, other settings on the <a href="class_softing_o_p_c_toolbox5_1_1_uadp_data_set_writer_message_data_type.htm" class="topiclink">UadpDataSetWriterMessageDataType</a> are not yet supported.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph" style="font-weight: bold;">Note:</span><span class="f_Paragraph"> <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1aecb7f10eec81ca01554bc48ae78f27b8" class="topiclink">DataSetWriter::setMessageSettings()</a> has to be invoked in any case, the default value is initialized to the abstract base class, which prevents the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriter</a> to operate.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">PubSub::DataSetWriterPtr&nbsp;writer&nbsp;=&nbsp;PubSub::DataSetWriter::create();</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">writer-&gt;setDataSet(myDataSet);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">writer-&gt;setId(nextWriterId++);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">writer-&gt;setMessageSettings(UadpDataSetWriterMessageDataType());</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Besides the mandatory configuration, you might want to configure the additional value content and the encoding of the DataSetFields via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1a66dd061bf102b06a1b2ceef20efadd00" class="topiclink">DataSetWriter::setDataSetFieldContentMask()</a>.</span><br />
<span class="f_Paragraph">The <a href="_enums_8h_1ab8236f919da76c415b6977a87180ca79.htm" class="topiclink">EnumDataSetFieldContentMask</a> allows the following configurations:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The value can be sent together with the used data type, encoded as the variant type <a href="class_softing_o_p_c_toolbox5_1_1_value.htm" class="topiclink">Value</a> (this is the default configuration).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Additionally to the value and data type of the default configuration, it is possible to include an additional status code and timestamps (source timestamp and/or server timestamp with or without picoseconds).</span><br />
<span class="f_Paragraph">Those additional fields can be selected individually.</span><br />
<span class="f_Paragraph">Any of those additional fields have the effect to encode the values as <a href="class_softing_o_p_c_toolbox5_1_1_data_value.htm" class="topiclink">DataValue</a>.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The value can be encoded as raw data, so only values are encoded directly without any additional information.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_data_value.htm" class="topiclink">DataValue</a> encoding (with the flag for the status code) should be used if the input values can have a bad status, the other encodings don't support to send bad notifications.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The raw encoding has the smallest message size on the wire, but subscribers need to know the exact meta data to be able to decode it.</span><br />
<span class="f_Paragraph">The raw encoding does not allow to configure abstract data types, as subscribers cannot know the used concrete subtype.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">By default, the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriter</a> is configured to send every </span><span class="f_Reference">DataSetMessage</span><span class="f_Paragraph"> as </span><span class="f_Reference">KeyFrameMessage</span><span class="f_Paragraph">, a </span><span class="f_Reference">KeyFrameMessage</span><span class="f_Paragraph"> contains all current values of the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm" class="topiclink">PublishedDataSet</a>.</span><br />
<span class="f_Paragraph">You can change this behavior, so that the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriter</a> will send </span><span class="f_Reference">DeltaFrameMessages, DeltaFrameMessages</span><span class="f_Paragraph"> contain only the Fields which have changes since the last publishing interval.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">This behavior can be changed via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer_1a7760c8abc18ffcbdc6e3e2fe76f2d4a7" class="topiclink">DataSetWriter::setKeyFrameCount()</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">A </span><span class="f_Reference">KeyFrameMessage</span><span class="f_Paragraph"> will be sent only every </span><span class="f_Reference">KeyFrameCount</span><span class="f_Paragraph"> publishing cycles, the </span><span class="f_Reference">DeltaFrameMessages</span><span class="f_Paragraph"> are send in the publishing cycles between the </span><span class="f_Reference">KeyFrameMessages</span><span class="f_Paragraph">.</span></p>
<p class="p_Paragraph"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> </span><span class="f_Reference">DeltaFrameMessages</span><span class="f_Paragraph"> are sent only when any value changes occur. Have a look on <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_writer_group.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_writer_group_1a0f8eb9dc1976170a96166ad99044244c" class="topiclink">WriterGroup::setKeepAliveTime()</a>, if no value changes occur for that period, a </span><span class="f_Reference">KeepAliveMessage</span><span class="f_Paragraph"> will be sent.</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=html_programmersguide_pubsub_publisherconfiguration_datasetwriter.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
