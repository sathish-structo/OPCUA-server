<!DOCTYPE HTML>
<html>
<head>
   <title>PubSub</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="ss" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "samplepubsub.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">PubSub</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="samplefiledirectory.htm">Previous</a>&nbsp;
     <a href="virtual_nodes_server.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><a id="hdr"></a><span class="f_Paragraph">This sample shows how a publisher and subscriber functionality can be implemented.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Where to Find</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The sample projects are located in the directory: </span><span class="f_Paragraph">&quot;</span><span class="f_FixedSize">&lt;InstallDir&gt;/Apps/Samples/Cpp/PubSub</span><span class="f_Paragraph">&quot; and sources are in the subdirectories &quot;</span><span class="f_FixedSize">PubSubStandalone</span><span class="f_Paragraph">&quot; and &quot;</span><span class="f_FixedSize">PubSubAddressSpace</span><span class="f_Paragraph">&quot;.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The two samples show, how a stand-alone application (i.e. an application not implementing either OPC UA server or OPC UA client) or a OPC UA server application can implement publisher and subscriber.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The major difference is, how a publisher can provide values to be published.</span><br />
<span class="f_Paragraph">The stand-alone application has to provide current values directly to the publisher data set.</span><br />
<span class="f_Paragraph">The UA server based sample shows that alternatively variables within the address space can be used as <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_items.htm" class="topiclink">PublishedDataItems</a> for publishing.</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Common Functionality</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">Some functionality is almost common in both samples and are described here:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure publisher <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_connection.htm" class="topiclink">Connection</a> - see <a href="html_programmersguide_pubsub_publisherconfiguration_connection.htm" class="topiclink">Configure Connection</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure publisher <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_writer_group.htm" class="topiclink">WriterGroup</a> - see <a href="html_programmersguide_pubsub_publisherconfiguration_writergroup.htm" class="topiclink">Configure WriterGroup</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure publisher <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_writer.htm" class="topiclink">DataSetWriter</a> - see <a href="html_programmersguide_pubsub_publisherconfiguration_datasetwriter.htm" class="topiclink">Configure DataSetWriter</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure subscriber <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_connection.htm" class="topiclink">Connection</a> - see <a href="html_programmersguide_pubsub_subscriberconfiguration_connection.htm" class="topiclink">Configure Connection</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure subscriber <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_reader_group.htm" class="topiclink">ReaderGroup</a> - see <a href="html_programmersguide_pubsub_subscriberconfiguration_readergroup.htm" class="topiclink">Configure ReaderGroup</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Configure subscriber <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader.htm" class="topiclink">DataSetReader</a> - see <a href="html_programmersguide_pubsub_subscriberconfiguration_datasetreader.htm" class="topiclink">Configure DataSetReader</a></span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The main difference between the sample with and without an address space is</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">How the field meta data is provided</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">How the publisher provides current values</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">The main functionality is implemented in the classes &quot;SamplePublisher&quot; and &quot;SampleSubscriber&quot;, where the PubSub objects are configured.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading3">Points of Interest</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">A publisher configures what is contained in the messages, both at WriterGroup (see &quot;</span><span class="f_Reference">configureWriterGroup</span><span class="f_Paragraph">&quot;) and DataSetWriter (see &quot;</span><span class="f_Reference">configureDataSetWriter</span><span class="f_Paragraph">&quot;).</span></p>
<p class="p_Paragraph"><span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> If the writer group does not contain the bit &quot;</span><span class="f_Reference">EnumUadpNetworkMessageContentMask_PayloadHeader</span><span class="f_Paragraph">&quot;, the WriterID is not part of the message and cannot be used at subscriber side for filtering.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">PubSubStandalone</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">This sample implements a stand-alone application which contains both publisher and subscriber.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">It is a very easy sample to show how publishing or subscribing can be implemented.</span><br />
<span class="f_Paragraph">It contains just one DataSetWriter and one DataSetReader, everything is hard-coded to focus on general PubSub functionality.</span></p>
<h2 class="p_Heading2"><span class="f_Heading3">Running the Sample</span></h2>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Compile and start the sample application PubSubStandalone.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;ss&quot; (Start Subscribing) to enable the subscriber.</span><br />
<span class="f_Paragraph">If any publisher is already publishing in the configured interface, the application prints the received values.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> Please be aware of configured filters!</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;sp&quot; (Start Publishing) to enable the publisher.</span><br />
<span class="f_Paragraph">If the subscriber is still enabled, the subscriber shall receive published messages and print them.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> If you change any publisher or subscriber configuration values, the subscriber might no longer receive messages.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Points of General Interest</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">In this sample, both publisher and subscriber use the same meta data information, see &quot;</span><span class="f_FixedSize">SampleMetaData.cpp</span><span class="f_Paragraph">&quot;.</span><br />
<span class="f_Paragraph">If you like to adapt the sample, then you can easily alter one of the used meta data information.</span><br />
<span class="f_Paragraph">In this case, the subscriber may no longer receive data from the publisher, but from a different publisher.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">In the stand-alone version the field meta data are provided programmatically, i.e. each information like &quot;</span><span class="f_Reference">data type</span><span class="f_Paragraph">&quot;, &quot;</span><span class="f_Reference">name</span><span class="f_Paragraph">&quot; has to be provided by the application.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Heading3">Points of Interest for Publisher</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The publisher has to provide cyclically current values to the SDK via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set_1af58f62efb7fd9ff8a57160edabf2521c" class="topiclink">PublishedDataSet::provideCurrentValues</a>.</span><br />
<span class="f_Paragraph">For this cyclic action a thread implementation is provided in the &quot;</span><span class="f_Reference">Utilities</span><span class="f_Paragraph">&quot;, where the virtual &quot;</span><span class="f_Reference">run</span><span class="f_Paragraph">&quot; method can perform cyclic operations.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">If you like to change published variables (add / remove variables or change data type), you have to adapt all following places:</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 13px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Paragraph">&quot;UpdateValuesThread::start&quot;</span><br />
<span class="f_Paragraph">Here a vector of DataValue is created, to hold the current values, initialized with a starting value.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 13px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Paragraph">&quot;UpdateValuesThread::run&quot;</span><br />
<span class="f_Paragraph">This method provides cyclically actual (simulated) values for the published variables.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 13px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Courier New';color:#000000;">o</span></td><td style="border:none"><span class="f_Paragraph">&quot;getSampleMetaData&quot;</span><br />
<span class="f_Paragraph">Here the meta data are provided. The meta data are meant for a subscriber to have knowledge of the published variables.</span><br />
<span class="f_Paragraph">At least the number and data types of the published variables have to be known, otherwise the message cannot be decoded!</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Heading3">Points of Interest for Subscriber</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The subscriber needs to know (some) meta data of the publisher. Otherwise even decoding of sent messages is not possible.</span><br />
<span class="f_Paragraph">In this sample we use the same meta data as the publisher. This is a typical use-case.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The subscriber can use filtering for messages.</span><br />
<span class="f_Paragraph">This is especially necessary, if multiple data set writers publish their (different) data on the same address. </span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> If a message does not match the filter, the application is not notified.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">If the subscriber notices a change of meta data, it can request an update from publisher via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader_1a55a359a030334a80df21d6166645591b" class="topiclink">DataSetReader::requestMetaData</a>.</span><br />
<span class="f_Paragraph">Published meta data will be notified via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader_1aa0e02297f53c70ec71dc03b2eea8a1d6" class="topiclink">DataSetReader::onMetaDataChanged</a>.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> Only the publisher of address space sample can simulate modification of meta data.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">PubSubAddressSpace</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">This sample implements a OPC UA server application which contains both publisher and subscriber.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">This sample is a little bit more complex (less hard-coded) and contains multiple dataset writers and readers.</span><br />
<span class="f_Paragraph">It can be easily used to be adapted for other variables of an already existing address space. </span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Running the Sample</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The server needs an existing application instance certificate and it must be in the correct directory. See <a href="html_setupcertificates.htm" class="topiclink">Setting up a Certificate Store</a> for how to create the demo certificate store. The path to the certificate is specified at the top of </span><span class="f_FixedSize">PubSubAddressSpace.cpp</span><span class="f_Paragraph">, adapt it if it doesn't fit.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Compile and start the sample application </span><span class="f_Reference">PubSubAddressSpace</span><span class="f_Paragraph">. Before the OPC UA server is started you will be prompted to specify a port number. Default value is 4880. By specifying different port numbers you will be able to start several instances of this sample application (usually one instance to publish data and one to subscribe to the published data).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Connect to the sample server with your favorite OPC UA client (e.g. Softing OPC UA Client) and browse the server's address space.</span><br />
<span class="f_Paragraph">For each published dataset a folder below each of the </span><span class="f_Reference">Publish</span><span class="f_Paragraph"> and </span><span class="f_Reference">Subscribe</span><span class="f_Paragraph"> folders are created with the </span><span class="f_Paragraph">name of the published dataset (Simple, AllTypes, MassTest).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">You can periodically read the value of these variables or subscribe to data changes by using monitored items. When publishing the sample will internally simulate value changes for the variables in the </span><span class="f_Paragraph" style="font-family: Courier;">Publish</span><span class="f_Paragraph"> folder. When subscribing the sample will store in the target variables under the </span><span class="f_Reference">Subscribe</span><span class="f_Paragraph"> folder the received field values.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The sample will expose the Publisher and Subscriber configurations in the OPC UA server's address space.</span><br />
<span class="f_Paragraph">While connected with the client you can explore the configuration under the </span><span class="f_Reference">PublishSubscribe</span><span class="f_Paragraph"> node, component of the </span><span class="f_Reference">Server</span><span class="f_Paragraph"> object.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;</span><span class="f_Reference">ss</span><span class="f_Paragraph">&quot; (Start Subscribing) to enable the subscriber.</span><br />
<span class="f_Paragraph">If any publisher is already publishing in the configured interface, the application prints the received values. Variable values are updated.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph" style="font-weight: bold;"> </span><span class="f_Paragraph">Please be aware of configured filters!</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;</span><span class="f_Reference">sp</span><span class="f_Paragraph">&quot; (Start Publishing) to enable the publisher.</span><br />
<span class="f_Paragraph">If the subscriber is enabled, then the subscriber shall receive published messages and print them.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;</span><span class="f_Paragraph" style="font-style: italic;">mm</span><span class="f_Paragraph">&quot; (Modify MetaData) to simulate changes of published information.</span><br />
<span class="f_Paragraph">Actually the meta data content is not changed in this sample, only the configuration version is updated to current time.</span><br />
<span class="f_Paragraph">Nevertheless, as the publisher is configured to send the configuration version as part of the messages, the subscriber will notice the change and automatically requests the updated meta data from the publisher.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type the command &quot;</span><span class="f_Reference">rm</span><span class="f_Paragraph">&quot; (Request MetaData) to manually trigger the subscriber to request meta data from the publisher.</span><br />
<span class="f_Paragraph">This can be of interest when a publisher does not send the configuration version as part of the message, so that the subscriber cannot detect a version change automatically.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The configuration and (initial) meta data of the published dataset &quot;Simple&quot;is compatible with the stand-alone sample described above.</span><br />
<span class="f_Paragraph">You can try various scenarios like publish from the stand-alone application and subscribe with the address space application or vice versa.</span></td></tr></table></div><p>&nbsp;</p>
<h3 class="p_Heading3"><span class="f_Heading3">Points of General Interest</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">In this sample the publisher builds the data set and field meta data based on information from the published variable nodes, see </span><span class="f_Reference">SamplePublisher::configurePublishedVariable</span><span class="f_Paragraph">).</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The subscriber is using compatible meta data information, see &quot;</span><span class="f_Paragraph" style="font-family: Courier;">SampleSubscriber::configureMetaDataFromNodes</span><span class="f_Paragraph">&quot;.</span><br />
<span class="f_Paragraph">If you like to adapt the sample, then you can easily alter one of the used meta data information.</span><br />
<span class="f_Paragraph">In this case, the subscriber may no longer receive data from the publisher, but from a different publisher.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">By default a PubSub application will not expose the configuration in the OPC UA server's address space.</span><br />
<span class="f_Paragraph">In the initialization code of this sample (</span><span class="f_FixedSize">PubSubAddressSpace.cpp</span><span class="f_Paragraph">) the call to <a href="class_softing_o_p_c_toolbox5_1_1_application.htm#class_softing_o_p_c_toolbox5_1_1_application_1a574eb31b5657cca7a44edc1233bf72bd" class="topiclink">Application::setShowPubSubNodes</a> enables exposing of the PubSub configuration nodes.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading3">Points of Interest for Publisher</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The Publisher shows the use of the <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_items.htm" class="topiclink">PublishedDataItems</a> class to select a list of OPC UA Variables in a servers address space as the source for the published data.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">For each published variable a <a href="class_softing_o_p_c_toolbox5_1_1_published_variable_data_type.htm" class="topiclink">PublishedVariableDataType</a> object is configured along with the field meta data (see </span><span class="f_Reference">SamplePublisher::configurePublishedVariable</span><span class="f_Paragraph">).</span><br />
<span class="f_Paragraph">The data source of the DataSet is finally set using <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_published_data_set_1a6e7d0fd60f304eef75a1fa2fd63d2c60" class="topiclink">PublishedDataSet::setDataSetSource</a>.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The publisher has to cyclically update the values of the published variables in the address space. The SDK will provide the variable values as current values for publishing.</span><br />
<span class="f_Paragraph">For this cyclic action a thread implementation is provided in the &quot;</span><span class="f_Paragraph" style="font-style: italic;">Utilities</span><span class="f_Paragraph">&quot;, where the virtual &quot;</span><span class="f_Paragraph" style="font-style: italic;">run</span><span class="f_Paragraph">&quot; method can perform cyclic operations.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Heading3">Points of Interest for Subscriber</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Received values for subscribed dataset are notified via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_subscribed_data_set.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_subscribed_data_set_1a883d3c723915e8f5420857dfe214a263" class="topiclink">SubscribedDataSet::onValuesReceived</a>. </span><br />
<span class="f_Paragraph">The derived class </span><span class="f_Reference">MySubscribedDataSet</span><span class="f_Paragraph"> overwrites this method to update the variable values in the servers address space.</span><br />
<span class="f_Paragraph">This sample simply stores the list of variables to update at </span><span class="f_Reference">MySubscribedDataSet</span><span class="f_Paragraph">.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The subscriber need to know (some) meta data of the publisher. Otherwise even decoding of sent messages is not possible.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The subscriber can use filtering for messages.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> If a message does not match the filter, the application is not notified.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">If the subscriber notices a change of meta data, it can request an update from publisher via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader_1a55a359a030334a80df21d6166645591b" class="topiclink">DataSetReader::requestMetaData</a>.</span><br />
<span class="f_Paragraph">Published meta data will be notified via <a href="class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader.htm#class_softing_o_p_c_toolbox5_1_1_pub_sub_1_1_data_set_reader_1aa0e02297f53c70ec71dc03b2eea8a1d6" class="topiclink">DataSetReader::onMetaDataChanged</a>.</span></td></tr></table></div>
      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=samplepubsub.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
