<!DOCTYPE HTML>
<html>
<head>
   <title>Reverse Connectivity</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "samplereverseconnectivity.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Reverse Connectivity</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="virtual_nodes_server.htm">Previous</a>&nbsp;
     <a href="structured_data_types.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><a id="hdr"></a><span class="f_Paragraph">This sample shows how to establish a server-initiated connection between a server and the client. The rationale behind using reverse connectivity and the details of the SDK implementation are described in the <a href="reverse_connect.htm" class="topiclink">Reverse Connect</a> article of the Programmer's Guide.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Sample implementation</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The sample features a minimal server application and a minimal client application, configured to establish the server-initiated connection. By default it will work when running the server and the client on the same host. To run the applications on different hosts and perform the reverse connect you'll have to adjust the endpoint URLs and the accepted server application URI.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The server configures the one and only endpoint for reverse connectivity by calling the <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint_1a106ef579fdac60faee7e6b2a6a8cdb0a" class="topiclink">Endpoint::addReverseConnect</a> method.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The client creates and configures an instance of the <a href="class_softing_o_p_c_toolbox5_1_1_client_1_1_reverse_listener.htm" class="topiclink">ReverseListener</a> class. This ReverseListener is started as soon as possible and later used with the ClientSession to reverse connect to the well-known server.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">On the client side the <a href="class_softing_o_p_c_toolbox5_1_1_client_1_1_session.htm#class_softing_o_p_c_toolbox5_1_1_client_1_1_session_1a700e72bbe529957113873930ed23de35" class="topiclink">Client::Session::onStatusChange</a> callback is overriden to print connection state changes.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Where to Find</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The sample projects are located in the directory: </span><span class="f_Paragraph">&quot;</span><span class="f_FixedSize" style="font-family: Verdana; font-style: italic;">&lt;InstallDir&gt;/Apps/Samples/Cpp/ReverseConnectivity</span><span class="f_Paragraph">&quot; and the sources are in the subdirectories &quot;</span><span class="f_FixedSize" style="font-family: Verdana; font-style: italic;">ReverseConnectServer</span><span class="f_Paragraph">&quot; and &quot;</span><span class="f_FixedSize" style="font-family: Verdana; font-style: italic;">ReverseConnectClient</span><span class="f_Paragraph">&quot;.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Running the Sample</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">The client and server need existing application instance certificates and configurations files at the expected locations. See <a href="html_setupcertificates.htm" class="topiclink">Setting up a Certificate Store</a> for how to create the demo certificate store.</span><br />
<span class="f_Paragraph">The paths to the configuration file is specified at the top of </span><span class="f_FixedSize">ReverseConnectServer.cpp</span><span class="f_Paragraph"> and </span><span class="f_FixedSize">ReverseConnectClient.cpp</span><span class="f_Paragraph">, the paths to the certificate files are stored in the configuration files. Adapt the file paths if they don't fit.</span><br />
<span class="f_NoteHeader">Note:</span><span class="f_Paragraph"> On VxWorks only absolute paths are allowed inside the configuration files. Adapt the file paths to be able to start the sample applications.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Compile and start the sample applications </span><span class="f_Reference">ReverseConnectClient</span><span class="f_Paragraph"> and </span><span class="f_Reference">ReverseConnectServer</span><span class="f_Paragraph">. Run the application of interest in the debugger and step through the code.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type on the client the command &quot;co&quot; (connect). The client should print a message as the connection state changes to &quot;connected&quot;.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Use the command &quot;rd&quot; to verify the connected session. It will read and display the value of the server's </span><span class="f_Reference">CurrentTime variable.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">Type on the client the command &quot;di&quot; (disconnect). The client should print a message as the connection state changes to &quot;disconnected&quot;.</span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Points of Interest</span></h3>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">How to configure an endpoint for reverse connectivity by using the <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint.htm#class_softing_o_p_c_toolbox5_1_1_server_1_1_endpoint_1a106ef579fdac60faee7e6b2a6a8cdb0a" class="topiclink">Endpoint::addReverseConnect</a> method.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">How to create and configure a <a href="class_softing_o_p_c_toolbox5_1_1_client_1_1_reverse_listener.htm" class="topiclink">ReverseListener</a> object on client side.</span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph">How to configure a client session to use the reverse listener and the application URI of the desired server for reverse connect by calling the <a href="class_softing_o_p_c_toolbox5_1_1_client_1_1_session.htm#class_softing_o_p_c_toolbox5_1_1_client_1_1_session_1a02d72a4f20ed750ed62262291b9b2b3f" class="topiclink">Client::Session::setReverseListener</a> method.</span></td></tr></table></div>
      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=samplereverseconnectivity.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
