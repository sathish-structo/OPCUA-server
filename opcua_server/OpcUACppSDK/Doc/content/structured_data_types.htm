<!DOCTYPE HTML>
<html>
<head>
   <title>Structured Data Types</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "structured_data_types.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">

<table width="100%" border="0" cellspacing="0" cellpadding="10">
  <tr valign="middle" bgcolor="#99CCFF">
    <td>
      <p>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td style="vertical-align:middle;">
              <p style="font-family:Verdana; font-size:9pt; font-style:italic;">OPC UA C++ Server &amp; Client SDK V6.00</p>
              <p style="font-family:Verdana; font-size:9pt; font-weight:bold;">Structured Data Types</p>
            </td>
          </tr>
        </table>
      </p>
    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="html_welcome.htm">Top</a>&nbsp;
     <a href="samplereverseconnectivity.htm">Previous</a>&nbsp;
     <a href="define_new_structured_data_typ.htm">Next</a>
     </span>
    </td>
  </tr>
  <tr bgcolor="white">
      <td colspan="2">
          <p class="p_Paragraph"><span class="f_Paragraph">Complex data types in general can be structured data types (including unions and structures with optional fields), opaque data types or enumerated data types.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Note:</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 currently only supports definition and handling of structured data types (without unions and structures with optional fields) and enumeration data types.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">All other custom data types can be handled by &quot;raw access&quot; only without having an appropriate <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescription</a>, i.e. access the encoded data directly as a <a href="class_softing_o_p_c_toolbox5_1_1_byte_string.htm" class="topiclink">ByteString</a>. See <a href="class_softing_o_p_c_toolbox5_1_1_value.htm#class_softing_o_p_c_toolbox5_1_1_value_1af87bfe5a53d5e73170248117f728efb3" class="topiclink">Value::getComplexValueRaw()</a> or <a href="class_softing_o_p_c_toolbox5_1_1_value.htm#class_softing_o_p_c_toolbox5_1_1_value_1a1eff359c5bac36d648a03cb8dfd7a6a7" class="topiclink">Value::setComplexValueRaw()</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Structured data types are composed of fields of several other data types, like structures in C.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">With structured data types a server is able to provide all values of a structure in a consistent way. This means that values of structured data types are always read, written and transported as one atomic value. Each single field (member) of the structured data type can be identified by a name.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 supports most well-known structured data types defined by OPC UA specification as C++ classes (like <a href="class_softing_o_p_c_toolbox5_1_1_build_info.htm" class="topiclink">BuildInfo</a>), but it also provides generic interfaces to define and access custom structured data types.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">This section describes how to create and make use of custom structured data types:</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph"><a href="define_new_structured_data_typ.htm" class="topiclink">Define New Structured Data Types</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph"><a href="retrieve_existing_custom_datatypes.htm" class="topiclink">Retrieve Existing Custom Data Type Definitions</a></span></td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 5px 0px 5px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:9pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none"><span class="f_Paragraph"><a href="use_custom_structured_data_typ.htm" class="topiclink">Access Custom Structured Data Type Values</a></span></td></tr></table></div><p class="p_Paragraph"><span class="f_Paragraph">&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Involved Nodes</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">OPC UA makes use of following nodes to define identify and describe data types: The DataType, the DataTypeDescription, the DataTypeDictionary , DataTypeSystem and the Encoding.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DataType</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The DataType node is the representation of a data type in the address space. Its <a href="class_softing_o_p_c_toolbox5_1_1_node_id.htm" class="topiclink">NodeId</a> is used</span> in <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_variable.htm" class="topiclink">Variables</a>, <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_variable_type.htm" class="topiclink">VariableTypes</a> and <a href="class_softing_o_p_c_toolbox5_1_1_value.htm" class="topiclink">Values</a> to identify the used type.</p>
<p class="p_Paragraph">One or multiple HasEncoding references link the <span class="f_Paragraph">DataType </span>node to the Encoding node.</p>
<h3 class="p_Heading3"><span class="f_Heading3">Encoding</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">An Encoding node links the data type (via the DataTypeDescription node) to the dictionary.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">In general, OPC UA applications can support several DataTypeSystems, which means that the same <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_data_type.htm" class="topiclink">DataType</a> can be encoded in more than one way.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_node_id.htm" class="topiclink">NodeId</a> of the Encoding Node is used to identify the encoding (and via references the <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_data_type.htm" class="topiclink">DataType</a>) of a value on the wire.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">A HasDescription reference links the EncodingNode to the DataTypeDescription node</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Applications developed with the SDK do not need to deal with these nodes and references directly - server applications just provide the NodeIds.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DataTypeDescription</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">A DataTypeDescription node is a component of a DataTypeDictionary node.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Applications developed with the SDK do not need to deal with these nodes and references directly - server applications just provide the NodeIds. </span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Application can directly access the <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescription</a> class, which stores information of the data type.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">For a <a href="class_softing_o_p_c_toolbox5_1_1_structured_data_type_description.htm" class="topiclink">StructuredDataTypeDescription</a>, it describes the contained fields, including their types, names and order.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DataTypeDictionary</span></h3>
<h3 class="p_Heading3"><span class="f_Paragraph">A DataTypeDictionary is a container for DataTypeDescriptions. It is bound to one namespace and can contain several DataTypeDescriptions for <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_data_type.htm" class="topiclink">DataTypes</a> of that namespace.</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_dictionary_variable.htm" class="topiclink">DictionaryVariable</a> is of the node class </span><a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_variable.htm" class="topiclink">Variable</a><span class="f_Paragraph"> and its Value attribute exposes the content of all contained DataTypeDescriptions. This contents are stored in a <a href="class_softing_o_p_c_toolbox5_1_1_byte_string.htm" class="topiclink">ByteString</a>, which represents an XML document.</span></p>
<p class="p_Paragraph" style="margin: 0px 0px 0px 0px;"><span class="f_Paragraph">Thus client applications are able to read the Value attribute of the DataTypeDictionary and use the information to encode and decode the stored <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_data_type.htm" class="topiclink">DataTypes</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">References of type HasComponent link the DataTypeDictionary to contained DataTypeDescription nodes.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Applications developed with the SDK do not need to deal with these nodes - server applications just provide the NodeId.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DataTypeSystem</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The DataTypeSystem specifies the format and conventions for defining data types in DataTypeDictionaries. The OPC UA specification specifies two of them, </span><span class="f_Paragraph" style="font-weight: bold;">UA Binary</span><span class="f_Paragraph"> and </span><span class="f_Paragraph" style="font-weight: bold;">W3C XML</span><span class="f_Paragraph">.</span></p>
<h3 class="p_Heading3"><span class="f_Paragraph">The OPC UA C++ Server &amp; Client SDK V6.00 currently only supports the </span><span class="f_Paragraph" style="font-weight: bold;">UA Binary</span><span class="f_Paragraph"> DataTypeSystem</span><span class="f_Paragraph">.</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">References of type HasComponent link the DataTypeSystem to the available DataTypeDictionary nodes.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Applications developed with the SDK do not need to deal with these nodes.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">&nbsp;</span></h3>
<h2 class="p_Heading2"><span class="f_Heading2">Involved SDK Classes</span></h2>
<p class="p_Paragraph"><span class="f_Paragraph">To provide a convenient access, the OPC UA C++ Server &amp; Client SDK V6.00 hides most of the complexity from an application and defines some classes to handle structured data types.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DataTypeDescription</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescription</a> is the logical representation of the DataTypeDescription node. This is an abstract class to be able to handle the description of different data type categories.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">StructuredDataTypeDescription</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_structured_data_type_description.htm" class="topiclink">StructuredDataTypeDescription</a> is a specialized class of <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescription</a> to store the information of one structured data type.</span></p>
<h3 class="p_Heading3"><span style="font-weight: bold;">StructureField</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The </span><a href="class_softing_o_p_c_toolbox5_1_1_structure_field.htm#class_softing_o_p_c_toolbox5_1_1_structure_field" class="topiclink">StructureField</a> <span class="f_Paragraph">is an essential part of a <a href="class_softing_o_p_c_toolbox5_1_1_structured_data_type_description.htm" class="topiclink">StructuredDataTypeDescription</a>, it is used to store all information of one contained field of a structured data type.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">It mainly consists of the field's name and the used data type.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">EnumerationDataTypeDescription</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_enumeration_data_type_description.htm" class="topiclink">EnumerationDataTypeDescription</a> is a specialized class of <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescription</a> to store the information of one enumeration data type.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">EnumField</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The </span><a href="class_softing_o_p_c_toolbox5_1_1_enum_field.htm#class_softing_o_p_c_toolbox5_1_1_enum_field" class="topiclink">EnumField</a> <span class="f_Paragraph">describes an enumeration value of the <a href="class_softing_o_p_c_toolbox5_1_1_enumeration_data_type_description.htm" class="topiclink">EnumerationDataTypeDescription</a></span><span class="f_Heading3" style="font-weight: normal;">.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">DictionaryVariable</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_dictionary_variable.htm" class="topiclink">DictionaryVariable</a> is the representation of the DataTypeDictionary node for server applications. It is mostly only used to specify the common node attributes, and to identify where to add new <a href="class_softing_o_p_c_toolbox5_1_1_data_type_description.htm" class="topiclink">DataTypeDescriptions</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">The namespace of the DataTypeDictionary is defined via the namespace index part in the <a href="class_softing_o_p_c_toolbox5_1_1_node_id.htm" class="topiclink">NodeId</a> of a <a href="class_softing_o_p_c_toolbox5_1_1_server_1_1_dictionary_variable.htm" class="topiclink">DictionaryVariable</a>.</span></p>
<p class="p_Paragraph"><span class="f_Paragraph">Client applications are not required to handle the DataTypeDictionaries, except specifying when to retrieve and update them.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Client::Session</span></h3>
<p class="p_Paragraph"><span class="f_Paragraph">The client session can be used to get a data type description of the server connected to.</span></p>

      </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top: 0px;">
         <p>
            <hr />
            <a href="mailto:support.automation@softing.com?subject=OPC UA C++ Server &amp; Client SDK V6.00 Documentation Feedback:Page=structured_data_types.htm">Send comments on this topic.</a>
         </p>
         <p>
            Copyright © Softing Industrial Automation GmbH&nbsp;2022
         </p>
    </td>
  </tr>
</table>
</body>
</html>
